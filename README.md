# Zaman Bank Assistant - Банковский ассистент

## Описание проекта

Банковский ассистент для Zaman Bank, который помогает пользователям управлять финансами. Система основана на исламских финансовых принципах и предоставляет персонализированные рекомендации через интеграцию с n8n.

## Основные возможности

### 🎯 Финансовые цели
- Создание и отслеживание финансовых целей (квартира, образование, путешествия)
- Рекомендации по достижению целей через n8n
- Мотивационные сообщения и поддержка

### 💰 Анализ финансов
- Анализ доходов и расходов
- Выявление паттернов трат
- Рекомендации по оптимизации бюджета

### 🏦 Банковские продукты
- Подбор исламских банковских продуктов
- Персонализированные рекомендации
- Сравнительный анализ продуктов

### 🧘 Борьба со стрессом
- Альтернативные способы борьбы со стрессом
- Рекомендации без импульсивных покупок
- Поддержка здоровых финансовых привычек

## Архитектура системы

### Технологический стек
- **Backend**: Spring Boot 3.2, Java 17
- **Database**: PostgreSQL
- **Automation**: n8n для автоматизации и рекомендаций
- **Security**: Spring Security, JWT
- **API**: RESTful API, WebSocket для real-time
- **Documentation**: Swagger/OpenAPI

### Микросервисная архитектура

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Web Client    │    │  Mobile App     │    │  Voice Client   │
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          └──────────────────────┼──────────────────────┘
                                 │
                    ┌─────────────▼─────────────┐
                    │     API Gateway          │
                    │   (Spring Boot)          │
                    └─────────────┬─────────────┘
                                  │
        ┌─────────────────────────┼─────────────────────────┐
        │                         │                         │
┌───────▼────────┐    ┌───────────▼──────────┐    ┌───────▼────────┐
│ Chat Service   │    │  Financial Service   │    │  n8n Service    │
│                │    │                      │    │                 │
│ - Conversations│    │ - Goals Management   │    │ - Automation    │
│ - Messages     │    │ - Transactions       │    │ - Workflows     │
│ - Voice/Text   │    │ - Analysis           │    │ - Integrations  │
└────────────────┘    └──────────────────────┘    └─────────────────┘
        │                         │                         │
        └─────────────────────────┼─────────────────────────┘
                                  │
                    ┌─────────────▼─────────────┐
                    │     Database Layer       │
                    │      PostgreSQL          │
                    └──────────────────────────┘
```

### Модели данных

#### User (Пользователь)
- Персональная информация
- Финансовые данные (доходы, расходы, сбережения)
- Предпочтения для автоматизации
- Профиль риска

#### FinancialGoal (Финансовая цель)
- Название и описание цели
- Целевая сумма и дата
- Текущий прогресс
- Рекомендации через n8n
- Мотивационные советы

#### Transaction (Транзакция)
- Сумма и тип операции
- Категория расхода
- Анализ транзакции
- Паттерны трат

#### Conversation (Разговор)
- Тип разговора (текст/голос)
- Контекст и история
- Статус разговора

#### Message (Сообщение)
- Роль отправителя (пользователь/ассистент)
- Содержимое сообщения
- Обработка через n8n
- Предлагаемые действия

## API Endpoints

### Financial Goals API
- `POST /api/goals` - Создание финансовой цели
- `GET /api/goals` - Получение целей пользователя
- `PUT /api/goals/{id}` - Обновление цели
- `POST /api/goals/{id}/contribute` - Внесение средств в цель
- `DELETE /api/goals/{id}` - Удаление цели

### n8n Integration
- Автоматизация финансового анализа
- Генерация рекомендаций по целям
- Подбор банковских продуктов
- Анализ паттернов трат
- Борьба со стрессом

## Конфигурация

### Переменные окружения
```bash
# Database
DB_USERNAME=postgres
DB_PASSWORD=password

# n8n Integration
N8N_BASE_URL=http://localhost:5678
N8N_API_KEY=your-n8n-api-key

# Admin
ADMIN_PASSWORD=admin123
```

### Запуск приложения
```bash
# Development
./gradlew bootRun --args='--spring.profiles.active=dev'

# Production
./gradlew bootRun
```

## Особенности реализации

### Исламские финансовые принципы
- Все рекомендации соответствуют шариату
- Запрет на риба (проценты)
- Партнерство вместо кредитования
- Этичные инвестиции

### n8n-автоматизация
- Анализ профиля пользователя
- Адаптация под финансовые цели
- Учет культурных особенностей
- Поддержка на казахском и русском языках

### Безопасность
- JWT аутентификация
- Шифрование персональных данных
- Аудит всех операций
- Соответствие GDPR

## Развертывание

### Docker
```bash
docker build -t zaman-ai-assistant .
docker run -p 8080:8080 zaman-ai-assistant
```

### Kubernetes
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: zaman-ai-assistant
spec:
  replicas: 3
  selector:
    matchLabels:
      app: zaman-ai-assistant
  template:
    metadata:
      labels:
        app: zaman-ai-assistant
    spec:
      containers:
      - name: zaman-ai-assistant
        image: zaman-ai-assistant:latest
        ports:
        - containerPort: 8080
```

## Мониторинг и логирование

- Health checks через Spring Actuator
- Метрики производительности
- Структурированное логирование
- Алерты при ошибках AI

## Будущие улучшения

- Интеграция с мобильным приложением Zaman Bank
- Расширенная аналитика
- Мультиязычная поддержка
- Интеграция с внешними финансовыми API
- Машинное обучение для улучшения рекомендаций